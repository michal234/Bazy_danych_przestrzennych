1. CREATE DATABASE s290135;
2. CREATE SCHEMA firma;
3. CREATE ROLE ksiegowosc;
4. a)
CREATE TABLE firma.pracownicy( id_pracownika INT NOT NULL UNIQUE, imie VARCHAR, nazwisko VARCHAR, adres VARCHAR, telefon VARCHAR(9) );
CREATE TABLE firma.godziny( id_godziny INT NOT NULL UNIQUE, data DATE, liczba_godzin INT, id_pracownika INT NOT NULL );
CREATE TABLE firma.pensja_stanowisko( id_pensji INT NOT NULL UNIQUE, stanowisko VARCHAR, kwota FLOAT(2) );
CREATE TABLE firma.premia( id_premii INT NOT NULL UNIQUE, rodzaj VARCHAR, kwota FLOAT(2) );
CREATE TABLE firma.wynagrodzenie( id_wynagrodzenia INT NOT NULL UNIQUE, data DATE, id_pracownika INT NOT NULL, id_godziny INT NOT NULL, id_pensji INT NOT NULL, id_premii INT NOT NULL);

b)
ALTER TABLE firma.pracownicy ADD PRIMARY KEY(id_pracownika);
ALTER TABLE firma.godziny ADD PRIMARY KEY(id_godziny);
ALTER TABLE firma.pensja_stanowisko ADD PRIMARY KEY(id_pensji);
ALTER TABLE firma.premia ADD PRIMARY KEY(id_premii);
ALTER TABLE firma.wynagrodzenie ADD PRIMARY KEY(id_wynagrodzenia);

c)
ALTER TABLE firma.godziny ADD FOREIGN KEY(id_pracownika) REFERENCES firma.pracownicy(id_pracownika);
ALTER TABLE firma.wynagrodzenie ADD FOREIGN KEY(id_godziny) REFERENCES firma.godziny(id_godziny);
ALTER TABLE firma.wynagrodzenie ADD FOREIGN KEY(id_pensji) REFERENCES firma.pensja_stanowisko(id_pensji);
ALTER TABLE firma.wynagrodzenie ADD FOREIGN KEY(id_premii) REFERENCES firma.premia(id_premii);

d)
CREATE CLUSTERED INDEX pracownik_ind ON firma.wynagrodzenie(id_pracownika);

e)
COMMENT ON TABLE firma.pracownicy IS 'Zawiera dane o pracownikach firmy';
COMMENT ON TABLE firma.godziny IS 'Zawiera dane o godzinach przepracowanych przez pracownika';
COMMENT ON TABLE firma.pensja_stanowisko IS 'Zawiera dane o pensji w odniesieniu do stanowiska';
COMMENT ON TABLE firma.premia IS 'Zawiera dane o możliwych premiach i ich wielkościach';
COMMENT ON TABLE firma.wynagrodzenie IS 'Zawiera dane o tym, jakie wynagrodzenie dostal dany pracownik uwzgleniajac liczbe godzin, pensje, premie i date wyplaty wynagrodzenia';

f)
ALTER TABLE firma.godziny ADD FOREIGN KEY(id_pracownika) REFERENCES firma.pracownicy(id_pracownika) ON UPDATE NO ACTION ON DELETE NO ACTION;
ALTER TABLE firma.wynagrodzenie ADD FOREIGN KEY(id_godziny) REFERENCES firma.godziny(id_godziny) ON UPDATE NO ACTION ON DELETE NO ACTION;
ALTER TABLE firma.wynagrodzenie ADD FOREIGN KEY(id_pensji) REFERENCES firma.pensja_stanowisko(id_pensji) ON UPDATE NO ACTION ON DELETE NO ACTION;
ALTER TABLE firma.wynagrodzenie ADD FOREIGN KEY(id_premii) REFERENCES firma.premia(id_premii) ON UPDATE NO ACTION ON DELETE NO ACTION;